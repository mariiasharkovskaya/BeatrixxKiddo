name: Build and Push Docker Image

on: 
    push:
        branches:
            - main
    workflow_dispatch:

env:
  CONTAINER_REGISTRY: docker.io
  DOCKER_USERNAME: mariiasharkovska
  DOCKER_IMAGE_NAME: beatrixkiddo

jobs:
  docker:
    runs-on: ubuntu-latest
    steps:
    - name: Docker Build
      run: echo docker build -t ${{ env.CONTAINER_REGISTRY }}/${{ env.DOCKER_USERNAME }}/${{ env.DOCKER_IMAGE_NAME}}:latest
    - name: Docker Login
      run: echo ${{ secrets.DOCKERHUB_READ_WRITE_TOKEN }} | docker login --username ${{ vars.DOCKERHUB_USERNAME }} --password-stdin
    - name: Docker Publish
      run: echo docker push ${{ env.CONTAINER_REGISTRY }}/${{ env.DOCKER_USERNAME }}/${{ env.DOCKER_IMAGE_NAME}}:latest